<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="cn.springmvc.dao.PriceTagDAO">
    
         <select id="selectAllPriceTags" resultType="PriceTag">
          SELECT * FROM PriceTest WHERE isDelete = 0;
         </select>
         
         <insert id="insertPriceTag" parameterType="PriceTag" keyProperty="id">
			INSERT INTO PriceTest 
			(`shopId`, `goodsNo`, `goodsName`, `unit`, `specifications`, `goodsOrigin`, 
			`salesPrice`, `propmPrice`, `marketPrice`, `qrCode`) VALUES 
			(#{shopId}, 
			#{goodsNo},
			 #{goodsName}, 
			 #{unit}, 
			 #{specifications}, 
			 #{goodsOrigin}, 
			 #{salesPrice}, 
			 #{propmPrice}, 
			 #{marketPrice}, 
			 #{qrCode});
         </insert>
     
         <select id="selectPriceTagsById" parameterType="String" resultType="PriceTag">
           SELECT * FROM PriceTest WHERE id=#{id};
         </select>
         
         <delete id="deletePriceTag" parameterType="String">
         	UPDATE PriceTest SET isDelete='1' WHERE id =#{id};
         </delete>
         
         <update id="updatePriceTag" parameterType="PriceTag">
         	UPDATE PriceTest SET shopId = #{shopId}, goodsNo = #{goodsNo},
         	goodsName = #{goodsName},unit = #{unit}, specifications = #{specifications},
         	goodsOrigin = #{goodsOrigin}, salesPrice = #{salesPrice}, propmPrice = #{propmPrice}, 
         	marketPrice = #{marketPrice} WHERE id = #{id};
         </update>
         
         <select id="selectPriceTagsByParams" parameterType="RequestParams" resultType="PriceTag" >
         	SELECT * FROM PriceTest WHERE 1 =1
         	<if test ="shopId != null">
         		AND shopId = #{shopId}
         	</if>
         	<if test="origin != null">
         		AND goodsOrigin = #{origin}
         	</if>
         	<if test="keyWord != null">
         		AND goodsName LIKE CONCAT('%','${keyWord}','%' )
         	</if>
         	;
         </select>
                  
         <update id="updatePriceTagByGoodsNo" parameterType="PriceTag">
            UPDATE PriceTest SET 
         	goodsName = #{goodsName},unit = #{unit}, specifications = #{specifications},
         	goodsOrigin = #{goodsOrigin}, salesPrice = #{salesPrice}, propmPrice = #{propmPrice}, 
         	marketPrice = #{marketPrice} WHERE goodsNo = #{goodsNo};
         </update>
         
         <select id="selectAllDeletedPriceTags" resultType="PriceTag">
         	SELECT * FROM PriceTest WHERE isDelete = 1;
         </select>
         
         <update id="rollbackDeletedPriceTag" parameterType="String">
         	UPDATE PriceTest SET isDelete='0' WHERE id =#{id};
         </update>
</mapper>
