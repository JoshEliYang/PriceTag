<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
 PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.springmvc.daoLvdi.SearchPriceTagDAO">

	<select id="searchPriceTagInfoByA" parameterType="SelectPriceTag"
		resultType="SearchPriceTag">
		select cargo_id as id,cargo_no as goodsNo, market_price as
		marketPrice, shop_price as salesPrice , purchase_price as propmPrice ,
		cargo_name as goodsName from e_goods_cargo where cargo_no LIKE
		CONCAT('%','${goodsNo}','%' ) or cargo_name LIKE
		CONCAT('%','${goodsNo}','%' );
	</select>

	<select id="getCountPriceTag" parameterType="SelectPriceTag"
		resultType="String">
		select count(*) from e_goods_cargo where cargo_no LIKE
		CONCAT('%','${goodsNo}','%' ) or cargo_name LIKE
		CONCAT('%','${goodsNo}','%' );
	</select>

	<select id="getNoDetail" parameterType="TagNum" resultType="CopyTagTemp">
		select cargo_no as goodsNo , purchase_price as propmPrice
		,market_price as marketPrice, shop_price as salesPrice from
		e_goods_cargo <where>  cargo_no in (
		<foreach collection="list" item="item" index="index"
			separator=",">
			#{item.goodsNo}
		</foreach></where> 
		)
	</select>
	
	
	<select id="searchListDetail" resultType="InsertList">
		SELECT a.cargo_name as goodsName ,a.cargo_no as goodsNo ,a.market_price as marketPrice ,a.shop_price as salesPrice,a.purchase_price as propmPrice ,cargo_id as qrCode  FROM e_goods_cargo a LEFT JOIN e_goods_info b ON
		 (a.goods_id = b.goods_id) WHERE a.cargo_no = #{1} and b.gc_type=#{0}
	</select>
</mapper>